<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>spinnaker_tools: sark/sark_pkt.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">spinnaker_tools<span id="projectnumber">&#160;3.4.0</span>
   </div>
   <div id="projectbrief">SpiNNaker API, sark, sc&amp;mp, bmp firmware and build tools</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ea19b752d6c82237b8b4fef6f5784c70.html">sark</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sark_pkt.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Packet handling routines for SARK.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="sark_8h_source.html">sark.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af5024ed78361476b301d17dd67a6766c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__pkt_8c.html#af5024ed78361476b301d17dd67a6766c">txpkt_int_han</a> (void)</td></tr>
<tr class="memdesc:af5024ed78361476b301d17dd67a6766c"><td class="mdescLeft">&#160;</td><td class="mdescRight">SpiNNaker packet may be transmitted interrupt handler.  <a href="sark__pkt_8c.html#af5024ed78361476b301d17dd67a6766c">More...</a><br /></td></tr>
<tr class="separator:af5024ed78361476b301d17dd67a6766c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4175f7e6597dd3d01fff5b4afa13ea58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__pkt_8c.html#a4175f7e6597dd3d01fff5b4afa13ea58">event_register_pkt</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> queue_size, <a class="el" href="sark_8h.html#a64cbeb17d515d4a60718a93633648bd4">vic_slot</a> slot)</td></tr>
<tr class="memdesc:a4175f7e6597dd3d01fff5b4afa13ea58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register the use of "pkt" routines.  <a href="sark__pkt_8c.html#a4175f7e6597dd3d01fff5b4afa13ea58">More...</a><br /></td></tr>
<tr class="separator:a4175f7e6597dd3d01fff5b4afa13ea58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5737fbb29e2f0f47e0375e4cba4162d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__pkt_8c.html#aa5737fbb29e2f0f47e0375e4cba4162d">pkt_tx_kdc</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> key, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> data, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> ctrl)</td></tr>
<tr class="memdesc:aa5737fbb29e2f0f47e0375e4cba4162d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit a packet which contains key, data and control byte (cb) fields.  <a href="sark__pkt_8c.html#aa5737fbb29e2f0f47e0375e4cba4162d">More...</a><br /></td></tr>
<tr class="separator:aa5737fbb29e2f0f47e0375e4cba4162d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c544176d5d81edfa1485b5ae2e0d20f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__pkt_8c.html#a5c544176d5d81edfa1485b5ae2e0d20f">pkt_tx_kd</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> key, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> data)</td></tr>
<tr class="memdesc:a5c544176d5d81edfa1485b5ae2e0d20f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit a packet which contains key and data fields.  <a href="sark__pkt_8c.html#a5c544176d5d81edfa1485b5ae2e0d20f">More...</a><br /></td></tr>
<tr class="separator:a5c544176d5d81edfa1485b5ae2e0d20f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5950f6444f3c7afd3e6cdefec311a19d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__pkt_8c.html#a5950f6444f3c7afd3e6cdefec311a19d">pkt_tx_k</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> key)</td></tr>
<tr class="memdesc:a5950f6444f3c7afd3e6cdefec311a19d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit a packet which contains only a key.  <a href="sark__pkt_8c.html#a5950f6444f3c7afd3e6cdefec311a19d">More...</a><br /></td></tr>
<tr class="separator:a5950f6444f3c7afd3e6cdefec311a19d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bace2238c993312c518553cdb237743"><td class="memItemLeft" align="right" valign="top"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__pkt_8c.html#a0bace2238c993312c518553cdb237743">pkt_tx_kc</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> key, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> ctrl)</td></tr>
<tr class="memdesc:a0bace2238c993312c518553cdb237743"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit a packet which contains key and control byte (cb) fields.  <a href="sark__pkt_8c.html#a0bace2238c993312c518553cdb237743">More...</a><br /></td></tr>
<tr class="separator:a0bace2238c993312c518553cdb237743"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Packet handling routines for SARK. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>&copy; The University of Manchester - 2009-2013</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Steve Temple, APT Group, School of Computer Science </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="af5024ed78361476b301d17dd67a6766c" name="af5024ed78361476b301d17dd67a6766c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5024ed78361476b301d17dd67a6766c">&#9670;&#160;</a></span>txpkt_int_han()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void txpkt_int_han </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SpiNNaker packet may be transmitted interrupt handler. </p>
<p >Sends the next packet on the <a class="el" href="sark_8h.html#a479554b22efa5cccf4f84313c4ee5b6a" title="Pointer to packet queue.">event_data_t::pkt_queue</a>. Disables itself if no packet is waiting. </p>

</div>
</div>
<a id="a4175f7e6597dd3d01fff5b4afa13ea58" name="a4175f7e6597dd3d01fff5b4afa13ea58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4175f7e6597dd3d01fff5b4afa13ea58">&#9670;&#160;</a></span>event_register_pkt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void event_register_pkt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>queue_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sark_8h.html#a64cbeb17d515d4a60718a93633648bd4">vic_slot</a>&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register the use of "pkt" routines. </p>
<p >An interrupt handler needs to be installed and assigned to a VIC slot. In addition, the size of the transmit packet queue must be specified. It should be a power of two no larger than 256 and refers to the number of packets in the queue. A run time error will occur if the queue size is invalid, the VIC slot is in use or memory for the packet queue could not be allocated. This routine also initialises the Transmit Control Register to send multicast packets.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue_size</td><td>number of packets in the transmit queue </td></tr>
    <tr><td class="paramname">slot</td><td>the VIC slot to use for the packet transmit interrupt </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa5737fbb29e2f0f47e0375e4cba4162d" name="aa5737fbb29e2f0f47e0375e4cba4162d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5737fbb29e2f0f47e0375e4cba4162d">&#9670;&#160;</a></span>pkt_tx_kdc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> pkt_tx_kdc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>ctrl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmit a packet which contains key, data and control byte (cb) fields. </p>
<p >The packet is placed on a transmit queue and sent when it reaches the head of the queue. The "ctrl" field is in the bottom 8 bits of the argument and is shifted left by 16 bits when it is placed in the hardware TCR in the chip.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>the key field to be placed in the packet </td></tr>
    <tr><td class="paramname">data</td><td>the key field to be placed in the packet </td></tr>
    <tr><td class="paramname">ctrl</td><td>the control byte to be placed in the packet </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero if the transmit queue is full, 1 otherwise </dd></dl>

</div>
</div>
<a id="a5c544176d5d81edfa1485b5ae2e0d20f" name="a5c544176d5d81edfa1485b5ae2e0d20f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c544176d5d81edfa1485b5ae2e0d20f">&#9670;&#160;</a></span>pkt_tx_kd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> pkt_tx_kd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmit a packet which contains key and data fields. </p>
<p >The packet is placed on a transmit queue and sent when it reaches the head of the queue. The transmit control register (TCR) which controls the type of packet which is sent is not modified by this routine so the previous value will be used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key;</td><td>the key field to be placed in the packet </td></tr>
    <tr><td class="paramname">data</td><td>the data field to be placed in the packet </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero if the transmit queue is full, 1 otherwise </dd></dl>

</div>
</div>
<a id="a5950f6444f3c7afd3e6cdefec311a19d" name="a5950f6444f3c7afd3e6cdefec311a19d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5950f6444f3c7afd3e6cdefec311a19d">&#9670;&#160;</a></span>pkt_tx_k()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> pkt_tx_k </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmit a packet which contains only a key. </p>
<p >The packet is placed on a transmit queue and sent when it reaches the head of the queue. The transmit control register (TCR) which controls the type of packet which is sent is not modified by this routine so the previous value will be used. The routine pkt_register must be called (once) before any of the pkt_tx_XXX routines are used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>the key field to be placed in the packet </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero if the transmit queue is full, 1 otherwise </dd></dl>

</div>
</div>
<a id="a0bace2238c993312c518553cdb237743" name="a0bace2238c993312c518553cdb237743"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bace2238c993312c518553cdb237743">&#9670;&#160;</a></span>pkt_tx_kc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> pkt_tx_kc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>ctrl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmit a packet which contains key and control byte (cb) fields. </p>
<p >The packet is placed on a transmit queue and sent when it reaches the head of the queue. The "ctrl" field is in the bottom 8 bits of the argument and is shifted left by 16 bits when it is placed in the hardware TCR in the chip.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>the key field to be placed in the packet </td></tr>
    <tr><td class="paramname">ctrl</td><td>the control byte to be placed in the packet </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero if the transmit queue is full, 1 otherwise </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 9 2023 10:13:33 for spinnaker_tools by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
