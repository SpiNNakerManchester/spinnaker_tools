<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>spinnaker_tools: sark/sark_hw.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">spinnaker_tools
   &#160;<span id="projectnumber">3.4.0</span>
   </div>
   <div id="projectbrief">SpiNNaker API, sark, sc&amp;mp, bmp firmware and build tools</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ea19b752d6c82237b8b4fef6f5784c70.html">sark</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">sark_hw.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Spinnaker hardware/peripheral support routines.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="sark_8h_source.html">sark.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4f49b7b8f990fad416ad7a5f50585ccc"><td class="memItemLeft" align="right" valign="top"><a id="a4f49b7b8f990fad416ad7a5f50585ccc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a4f49b7b8f990fad416ad7a5f50585ccc">null_int_han</a> (void)</td></tr>
<tr class="memdesc:a4f49b7b8f990fad416ad7a5f50585ccc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The interrupt handler that does absolutely nothing at all. <br /></td></tr>
<tr class="separator:a4f49b7b8f990fad416ad7a5f50585ccc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adae7021b786cdfa94565a316acabbe32"><td class="memItemLeft" align="right" valign="top"><a id="adae7021b786cdfa94565a316acabbe32"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#adae7021b786cdfa94565a316acabbe32">vic_error</a> (void)</td></tr>
<tr class="memdesc:adae7021b786cdfa94565a316acabbe32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to indicate that the VIC has not been configured. Triggers an RTE. <br /></td></tr>
<tr class="separator:adae7021b786cdfa94565a316acabbe32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed572d885f25c88acdc5a11c26e51b2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#aed572d885f25c88acdc5a11c26e51b2c">sark_vic_init</a> (void)</td></tr>
<tr class="memdesc:aed572d885f25c88acdc5a11c26e51b2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a full software initialisation of the VIC.  <a href="sark__hw_8c.html#aed572d885f25c88acdc5a11c26e51b2c">More...</a><br /></td></tr>
<tr class="separator:aed572d885f25c88acdc5a11c26e51b2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e5523f51f1df77463689f9567c87884"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a8e5523f51f1df77463689f9567c87884">sark_vic_set</a> (<a class="el" href="sark_8h.html#a64cbeb17d515d4a60718a93633648bd4">vic_slot</a> slot, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> interrupt, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> enable, <a class="el" href="sark_8h.html#add2659cdf5414e6ab00bc5c7471a07f8">int_handler</a> handler)</td></tr>
<tr class="memdesc:a8e5523f51f1df77463689f9567c87884"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises one of the VIC slots to set up an interrupt handler.  <a href="sark__hw_8c.html#a8e5523f51f1df77463689f9567c87884">More...</a><br /></td></tr>
<tr class="separator:a8e5523f51f1df77463689f9567c87884"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28c92abd55df0daf0b4b05284277c8b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a28c92abd55df0daf0b4b05284277c8b8">v2p_mask</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> virt_mask)</td></tr>
<tr class="memdesc:a28c92abd55df0daf0b4b05284277c8b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a bit mask of virtual core IDs, returns a mask of the corresponding physical core IDs.  <a href="sark__hw_8c.html#a28c92abd55df0daf0b4b05284277c8b8">More...</a><br /></td></tr>
<tr class="separator:a28c92abd55df0daf0b4b05284277c8b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3fc2d449c65d25d3151ce7d034d0249"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#aa3fc2d449c65d25d3151ce7d034d0249">get4</a> (const <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *word, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> index)</td></tr>
<tr class="memdesc:aa3fc2d449c65d25d3151ce7d034d0249"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extracts value from packed array of 4-bit unsigned integers.  <a href="sark__hw_8c.html#aa3fc2d449c65d25d3151ce7d034d0249">More...</a><br /></td></tr>
<tr class="separator:aa3fc2d449c65d25d3151ce7d034d0249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7338a87d005d821ee1ef167eda592ecb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a7338a87d005d821ee1ef167eda592ecb">sark_led_init</a> (void)</td></tr>
<tr class="memdesc:a7338a87d005d821ee1ef167eda592ecb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the hardware (GPIO port) which drives the LEDs attached to the SpiNNaker chip.  <a href="sark__hw_8c.html#a7338a87d005d821ee1ef167eda592ecb">More...</a><br /></td></tr>
<tr class="separator:a7338a87d005d821ee1ef167eda592ecb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74a3a76206602b65fc8f482d0c9cce5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a74a3a76206602b65fc8f482d0c9cce5d">sark_led_set</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> leds)</td></tr>
<tr class="memdesc:a74a3a76206602b65fc8f482d0c9cce5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls one or more of the LEDs attached to the SpiNNaker chip.  <a href="sark__hw_8c.html#a74a3a76206602b65fc8f482d0c9cce5d">More...</a><br /></td></tr>
<tr class="separator:a74a3a76206602b65fc8f482d0c9cce5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bfda3e690ab2344e88f6e8934e2edd4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a5bfda3e690ab2344e88f6e8934e2edd4">pl340_init</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> mem_clk)</td></tr>
<tr class="memdesc:a5bfda3e690ab2344e88f6e8934e2edd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the PL340 memory controller.  <a href="sark__hw_8c.html#a5bfda3e690ab2344e88f6e8934e2edd4">More...</a><br /></td></tr>
<tr class="separator:a5bfda3e690ab2344e88f6e8934e2edd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc00e275bcd21290b0ade7caffb3f690"><td class="memItemLeft" align="right" valign="top"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#afc00e275bcd21290b0ade7caffb3f690">rtr_mc_clear</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="el" href="spin1__api_8c.html#a3c1686c281a6d3ab409c4684891399cd">start</a>, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> count)</td></tr>
<tr class="memdesc:afc00e275bcd21290b0ade7caffb3f690"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises a set of the router's multicast (MC) table registers so that routing is disabled.  <a href="sark__hw_8c.html#afc00e275bcd21290b0ade7caffb3f690">More...</a><br /></td></tr>
<tr class="separator:afc00e275bcd21290b0ade7caffb3f690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a151645129faec74d427f2961d4ab9449"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a151645129faec74d427f2961d4ab9449">rtr_mc_init</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="el" href="spin1__api_8c.html#a3c1686c281a6d3ab409c4684891399cd">start</a>)</td></tr>
<tr class="memdesc:a151645129faec74d427f2961d4ab9449"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the router's multicast (MC) tables and sets up the data structures for allocating router entries.  <a href="sark__hw_8c.html#a151645129faec74d427f2961d4ab9449">More...</a><br /></td></tr>
<tr class="separator:a151645129faec74d427f2961d4ab9449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ba7cd3d8b44e6225eec84c46d20a441"><td class="memItemLeft" align="right" valign="top"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a3ba7cd3d8b44e6225eec84c46d20a441">rtr_mc_load</a> (<a class="el" href="sark_8h.html#structrtr__entry__t">rtr_entry_t</a> *e, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> count, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> offset, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> app_id)</td></tr>
<tr class="memdesc:a3ba7cd3d8b44e6225eec84c46d20a441"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load router MC table from a table in memory.  <a href="sark__hw_8c.html#a3ba7cd3d8b44e6225eec84c46d20a441">More...</a><br /></td></tr>
<tr class="separator:a3ba7cd3d8b44e6225eec84c46d20a441"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81ca61e30076d1724a68027b63f6e970"><td class="memItemLeft" align="right" valign="top"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a81ca61e30076d1724a68027b63f6e970">rtr_mc_set</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> entry, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> key, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> mask, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> route)</td></tr>
<tr class="memdesc:a81ca61e30076d1724a68027b63f6e970"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a given entry in the router MC table.  <a href="sark__hw_8c.html#a81ca61e30076d1724a68027b63f6e970">More...</a><br /></td></tr>
<tr class="separator:a81ca61e30076d1724a68027b63f6e970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfe404b27b699071843bb9fbe10a5325"><td class="memItemLeft" align="right" valign="top"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#acfe404b27b699071843bb9fbe10a5325">rtr_mc_get</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> entry, <a class="el" href="sark_8h.html#structrtr__entry__t">rtr_entry_t</a> *r)</td></tr>
<tr class="memdesc:acfe404b27b699071843bb9fbe10a5325"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a given entry in the router MC table.  <a href="sark__hw_8c.html#acfe404b27b699071843bb9fbe10a5325">More...</a><br /></td></tr>
<tr class="separator:acfe404b27b699071843bb9fbe10a5325"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71b1b5e0a5526750b671ebe436da92f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a71b1b5e0a5526750b671ebe436da92f3">rtr_fr_set</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> route)</td></tr>
<tr class="memdesc:a71b1b5e0a5526750b671ebe436da92f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the fixed-route register in the router.  <a href="sark__hw_8c.html#a71b1b5e0a5526750b671ebe436da92f3">More...</a><br /></td></tr>
<tr class="separator:a71b1b5e0a5526750b671ebe436da92f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab87c4fc234cb78333321bc0acf3b7b75"><td class="memItemLeft" align="right" valign="top"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#ab87c4fc234cb78333321bc0acf3b7b75">rtr_fr_get</a> (void)</td></tr>
<tr class="memdesc:ab87c4fc234cb78333321bc0acf3b7b75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the fixed-route register from the router and masks off the top 8 bits.  <a href="sark__hw_8c.html#ab87c4fc234cb78333321bc0acf3b7b75">More...</a><br /></td></tr>
<tr class="separator:ab87c4fc234cb78333321bc0acf3b7b75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74ab37d7c02d8246d2b0fdc7670ce5fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a74ab37d7c02d8246d2b0fdc7670ce5fa">rtr_p2p_init</a> (void)</td></tr>
<tr class="memdesc:a74ab37d7c02d8246d2b0fdc7670ce5fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the router point-to-point (P2P) table.  <a href="sark__hw_8c.html#a74ab37d7c02d8246d2b0fdc7670ce5fa">More...</a><br /></td></tr>
<tr class="separator:a74ab37d7c02d8246d2b0fdc7670ce5fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42ab52595bb1286fe7428cad3f2670d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a42ab52595bb1286fe7428cad3f2670d9">rtr_p2p_set</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> entry, <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> value)</td></tr>
<tr class="memdesc:a42ab52595bb1286fe7428cad3f2670d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a P2P table entry.  <a href="sark__hw_8c.html#a42ab52595bb1286fe7428cad3f2670d9">More...</a><br /></td></tr>
<tr class="separator:a42ab52595bb1286fe7428cad3f2670d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae43c60a896bbc207a45724881f051e6a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#ae43c60a896bbc207a45724881f051e6a">rtr_p2p_get</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> entry)</td></tr>
<tr class="memdesc:ae43c60a896bbc207a45724881f051e6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a P2P table entry.  <a href="sark__hw_8c.html#ae43c60a896bbc207a45724881f051e6a">More...</a><br /></td></tr>
<tr class="separator:ae43c60a896bbc207a45724881f051e6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a25c25939b98a0966b1248a52f06f27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a4a25c25939b98a0966b1248a52f06f27">rtr_diag_init</a> (const <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *table)</td></tr>
<tr class="memdesc:a4a25c25939b98a0966b1248a52f06f27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the 16 diagnostic registers in the router using the supplied table (which should have 16 entries).  <a href="sark__hw_8c.html#a4a25c25939b98a0966b1248a52f06f27">More...</a><br /></td></tr>
<tr class="separator:a4a25c25939b98a0966b1248a52f06f27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2550bb97884d308a9cccd5f4791e6de8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a2550bb97884d308a9cccd5f4791e6de8">rtr_init</a> (<a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> monitor)</td></tr>
<tr class="memdesc:a2550bb97884d308a9cccd5f4791e6de8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a full initialisation of the router.  <a href="sark__hw_8c.html#a2550bb97884d308a9cccd5f4791e6de8">More...</a><br /></td></tr>
<tr class="separator:a2550bb97884d308a9cccd5f4791e6de8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2f80bce7a52da644c5f5292441b79378"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="spinnaker_8h.html#ab95f123a6c9bcfee6a343170ef8c5f69">ushort</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a2f80bce7a52da644c5f5292441b79378">pl340_data</a> []</td></tr>
<tr class="memdesc:a2f80bce7a52da644c5f5292441b79378"><td class="mdescLeft">&#160;</td><td class="mdescRight">PL340 SDRAM controller configuration data.  <a href="sark__hw_8c.html#a2f80bce7a52da644c5f5292441b79378">More...</a><br /></td></tr>
<tr class="separator:a2f80bce7a52da644c5f5292441b79378"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a8c4849ba3a8e317f00834e18287fe2"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sark__hw_8c.html#a0a8c4849ba3a8e317f00834e18287fe2">dgf_init</a> []</td></tr>
<tr class="memdesc:a0a8c4849ba3a8e317f00834e18287fe2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default router diagnostic configuration.  <a href="sark__hw_8c.html#a0a8c4849ba3a8e317f00834e18287fe2">More...</a><br /></td></tr>
<tr class="separator:a0a8c4849ba3a8e317f00834e18287fe2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Spinnaker hardware/peripheral support routines. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>&copy; The University of Manchester - 2009-2019</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Steve Temple, APT Group, School of Computer Science </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aed572d885f25c88acdc5a11c26e51b2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed572d885f25c88acdc5a11c26e51b2c">&#9670;&nbsp;</a></span>sark_vic_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sark_vic_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a full software initialisation of the VIC. </p>
<p>All interrupts are disabled and all vector entries are initialised to a disabled state. The default handler address is set to point to a return from interrupt instruction. </p>

</div>
</div>
<a id="a8e5523f51f1df77463689f9567c87884"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e5523f51f1df77463689f9567c87884">&#9670;&nbsp;</a></span>sark_vic_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sark_vic_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sark_8h.html#a64cbeb17d515d4a60718a93633648bd4">vic_slot</a>&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>interrupt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sark_8h.html#add2659cdf5414e6ab00bc5c7471a07f8">int_handler</a>&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises one of the VIC slots to set up an interrupt handler. </p>
<p>No check is made that the slot is not already in use. The slot can be SLOT_FIQ in which case the FIQ interrupt is set up.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slot</td><td>the slot to be used </td></tr>
    <tr><td class="paramname">interrupt</td><td>the interrupt number (0..31) </td></tr>
    <tr><td class="paramname">enable</td><td>non-zero if the interrupt should be enabled </td></tr>
    <tr><td class="paramname">handler</td><td>pointer to the handler code </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a28c92abd55df0daf0b4b05284277c8b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28c92abd55df0daf0b4b05284277c8b8">&#9670;&nbsp;</a></span>v2p_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> v2p_mask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>virt_mask</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a bit mask of virtual core IDs, returns a mask of the corresponding physical core IDs. </p>
<p>(Unlikely to be used by application code).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">virt_mask</td><td>virtual core bit mask </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>physical core bit mask </dd></dl>

</div>
</div>
<a id="aa3fc2d449c65d25d3151ce7d034d0249"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3fc2d449c65d25d3151ce7d034d0249">&#9670;&nbsp;</a></span>get4()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> get4 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extracts value from packed array of 4-bit unsigned integers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">word</td><td>The array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The index, as if the array isn't packed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the value, in range 0&ndash;15 </dd></dl>

</div>
</div>
<a id="a7338a87d005d821ee1ef167eda592ecb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7338a87d005d821ee1ef167eda592ecb">&#9670;&nbsp;</a></span>sark_led_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sark_led_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the hardware (GPIO port) which drives the LEDs attached to the SpiNNaker chip. </p>
<p>(Unlikely to be used by application code) </p>

</div>
</div>
<a id="a74a3a76206602b65fc8f482d0c9cce5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74a3a76206602b65fc8f482d0c9cce5d">&#9670;&nbsp;</a></span>sark_led_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sark_led_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>leds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controls one or more of the LEDs attached to the SpiNNaker chip. </p>
<p>The argument should be a sum of calls to macros LED_ON, LED_OFF, LED_INV which turn on, turn off or flip a LED. The argument to each macro is the LED number, an integer starting at zero. All SpiNNaker boards to date have at least one LED so <a class="el" href="sark_8h.html#aaa8988d6632fc64b0ec4a8528cebb7fd" title="Turn LED on.">LED_ON(0)</a> will always work!</p>
<p>To turn on LED 1 and turn off LED 2 the call looks like this... </p><div class="fragment"><div class="line"><a class="code" href="sark_8h.html#a74a3a76206602b65fc8f482d0c9cce5d">sark_led_set</a> (<a class="code" href="sark_8h.html#aaa8988d6632fc64b0ec4a8528cebb7fd">LED_ON</a>(1) + <a class="code" href="sark_8h.html#a552169688fe8834a280b877a8cf5020e">LED_OFF</a>(2));</div>
<div class="ttc" id="asark_8h_html_a552169688fe8834a280b877a8cf5020e"><div class="ttname"><a href="sark_8h.html#a552169688fe8834a280b877a8cf5020e">LED_OFF</a></div><div class="ttdeci">#define LED_OFF(n)</div><div class="ttdoc">Turn LED off.</div><div class="ttdef"><b>Definition:</b> sark.h:364</div></div>
<div class="ttc" id="asark_8h_html_a74a3a76206602b65fc8f482d0c9cce5d"><div class="ttname"><a href="sark_8h.html#a74a3a76206602b65fc8f482d0c9cce5d">sark_led_set</a></div><div class="ttdeci">void sark_led_set(uint leds)</div><div class="ttdoc">Controls one or more of the LEDs attached to the SpiNNaker chip.</div><div class="ttdef"><b>Definition:</b> sark_hw.c:147</div></div>
<div class="ttc" id="asark_8h_html_aaa8988d6632fc64b0ec4a8528cebb7fd"><div class="ttname"><a href="sark_8h.html#aaa8988d6632fc64b0ec4a8528cebb7fd">LED_ON</a></div><div class="ttdeci">#define LED_ON(n)</div><div class="ttdoc">Turn LED on.</div><div class="ttdef"><b>Definition:</b> sark.h:363</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">leds</td><td>encoded value specifying LEDs and operations thereon </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5bfda3e690ab2344e88f6e8934e2edd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bfda3e690ab2344e88f6e8934e2edd4">&#9670;&nbsp;</a></span>pl340_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> pl340_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>mem_clk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the PL340 memory controller. </p>
<p>(<em>Extremely</em> unlikely to be used by application code.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mem_clk</td><td>memory clock speed in MHz </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on failure, 1 on success </dd></dl>

</div>
</div>
<a id="afc00e275bcd21290b0ade7caffb3f690"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc00e275bcd21290b0ade7caffb3f690">&#9670;&nbsp;</a></span>rtr_mc_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> rtr_mc_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises a set of the router's multicast (MC) table registers so that routing is disabled. </p>
<p>Because some of the MC hardware registers are not readable, copies of these registers are kept in memory to allow them to be read back. These copies are also initialised here. The entries in the router are disabled by setting route and mask to zero and the key to all ones.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start</td><td>first entry to be cleared </td></tr>
    <tr><td class="paramname">count</td><td>number of entries to be cleared </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if OK, 0 on failure (last entry out of range) </dd></dl>

</div>
</div>
<a id="a151645129faec74d427f2961d4ab9449"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a151645129faec74d427f2961d4ab9449">&#9670;&nbsp;</a></span>rtr_mc_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtr_mc_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>start</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the router's multicast (MC) tables and sets up the data structures for allocating router entries. </p>
<p>Because some of the MC hardware registers are not readable, copies of these registers are kept in memory to allow them to be read back. These copies are also initialised here. All entries in the router are disabled (route and mask set to zero and key set to all ones). The start parameter allows some low entries to be left unchanged.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start</td><td>first entry to clear - usually 0 or 1 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3ba7cd3d8b44e6225eec84c46d20a441"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ba7cd3d8b44e6225eec84c46d20a441">&#9670;&nbsp;</a></span>rtr_mc_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> rtr_mc_load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sark_8h.html#structrtr__entry__t">rtr_entry_t</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>app_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load router MC table from a table in memory. </p>
<p>Within the table, which is an array of "rtr_entry_t". the "next" field holds the entry number to be loaded. If the count parameter is zero, the count is taken from the "free" field of the first entry entry in the table. The offset parameter is added to the entry number to address each router table entry. The "app_id" parameter sets the app_id in the router table copy if non-zero. Otherwise it will be taken from SARK.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">e</td><td>pointer to first entry in table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>size of table (or 0 to use count from table) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>added to entry numbers from table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">app_id</td><td>sets app_id in table if non-zero </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful, 0 on failure (count or entry out of range) </dd></dl>

</div>
</div>
<a id="a81ca61e30076d1724a68027b63f6e970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81ca61e30076d1724a68027b63f6e970">&#9670;&nbsp;</a></span>rtr_mc_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> rtr_mc_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>route</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets a given entry in the router MC table. </p>
<p>The supplied route is based on virtual core numbers and this is mapped into physical core numbers before being written to the router. Copies of all three router registers are also maintained in memory so that they can be read back even though the router hardware doesn't support reading of key and mask registers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>the router entry number (should be in range 0..1023) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>the key field </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mask</td><td>the mask field </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">route</td><td>the route field </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 on failure (entry out of range) </dd></dl>

</div>
</div>
<a id="acfe404b27b699071843bb9fbe10a5325"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfe404b27b699071843bb9fbe10a5325">&#9670;&nbsp;</a></span>rtr_mc_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> rtr_mc_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sark_8h.html#structrtr__entry__t">rtr_entry_t</a> *&#160;</td>
          <td class="paramname"><em>r</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a given entry in the router MC table. </p>
<p>The parameter <code>r</code> is a pointer to a <a class="el" href="sark_8h.html#structrtr__entry__t" title="Copy of router entry (16 bytes)">rtr_entry_t</a> structure. The router register fields in the struct are filled in from the RAM copy of the router registers which is maintained by the system.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>number of entry </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">r</td><td>pointer to <a class="el" href="sark_8h.html#structrtr__entry__t" title="Copy of router entry (16 bytes)">rtr_entry_t</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 on failure (entry out of range) </dd></dl>

</div>
</div>
<a id="a71b1b5e0a5526750b671ebe436da92f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71b1b5e0a5526750b671ebe436da92f3">&#9670;&nbsp;</a></span>rtr_fr_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtr_fr_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>route</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the fixed-route register in the router. </p>
<p>Only the lower 24 bits are used as the register has bits with another function in its top 8 bits.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">route</td><td>fixed-route mask (bottom 24 bits) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab87c4fc234cb78333321bc0acf3b7b75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab87c4fc234cb78333321bc0acf3b7b75">&#9670;&nbsp;</a></span>rtr_fr_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> rtr_fr_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the fixed-route register from the router and masks off the top 8 bits. </p>
<dl class="section return"><dt>Returns</dt><dd>Value of router FR register (bottom 24 bits only) </dd></dl>

</div>
</div>
<a id="a74ab37d7c02d8246d2b0fdc7670ce5fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74ab37d7c02d8246d2b0fdc7670ce5fa">&#9670;&nbsp;</a></span>rtr_p2p_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtr_p2p_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise the router point-to-point (P2P) table. </p>
<p>All 64K entries are set to 6. (Unlikely to be used by application code). </p>

</div>
</div>
<a id="a42ab52595bb1286fe7428cad3f2670d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42ab52595bb1286fe7428cad3f2670d9">&#9670;&nbsp;</a></span>rtr_p2p_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtr_p2p_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets a P2P table entry. </p>
<p>The value should be in the range 0 to 7. Values from 0 to 5 cause the packet to be routed to one of the external links while 7 causes the packet to be sent to the monitor processor. The value 6 causes the packet to be dropped. (Unlikely to be used by application code).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>the entry number in the range 0..65535 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>the value to be written in the range 0..7 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae43c60a896bbc207a45724881f051e6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae43c60a896bbc207a45724881f051e6a">&#9670;&nbsp;</a></span>rtr_p2p_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> rtr_p2p_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a P2P table entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entry</td><td>the entry number in the range 0..65535 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>table entry (range 0 to 7) </dd></dl>

</div>
</div>
<a id="a4a25c25939b98a0966b1248a52f06f27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a25c25939b98a0966b1248a52f06f27">&#9670;&nbsp;</a></span>rtr_diag_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtr_diag_init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the 16 diagnostic registers in the router using the supplied table (which should have 16 entries). </p>
<p>The count registers are first disabled and cleared, the new register values set and and then the counters are enabled. (Unlikely to be used by application code).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>pointer to table of 16 initialisation words </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2550bb97884d308a9cccd5f4791e6de8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2550bb97884d308a9cccd5f4791e6de8">&#9670;&nbsp;</a></span>rtr_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtr_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>monitor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a full initialisation of the router. </p>
<p>Calls <a class="el" href="sark_8h.html#a151645129faec74d427f2961d4ab9449" title="Initialises the router&#39;s multicast (MC) tables and sets up the data structures for allocating router ...">rtr_mc_init()</a>, <a class="el" href="sark_8h.html#a74ab37d7c02d8246d2b0fdc7670ce5fa" title="Initialise the router point-to-point (P2P) table.">rtr_p2p_init()</a> and <a class="el" href="sark_8h.html#a4a25c25939b98a0966b1248a52f06f27" title="Initialises the 16 diagnostic registers in the router using the supplied table (which should have 16 ...">rtr_diag_init()</a> and also sets the router control register. The control register Wait1 field is set to 0x40 and the Wait2 field is set to 0x00. The initialisation of the diagnostic registers places 'useful' values in 12 of the registers and leaves 4 (numbers 12 to 15) free for applications. (Unlikely to be used by application code).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">monitor</td><td>physical core ID of monitor processor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2f80bce7a52da644c5f5292441b79378"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f80bce7a52da644c5f5292441b79378">&#9670;&nbsp;</a></span>pl340_data</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="spinnaker_8h.html#ab95f123a6c9bcfee6a343170ef8c5f69">ushort</a> pl340_data[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    0x0006,     </div>
<div class="line">    0x0001,     </div>
<div class="line">    0x0002,     </div>
<div class="line">    0x0007,     </div>
<div class="line">    0x000A,     </div>
<div class="line">    0x0003,     </div>
<div class="line">    0x0275,     </div>
<div class="line">    0x0003,     </div>
<div class="line">    0x0002,     </div>
<div class="line">    0x0003,     </div>
<div class="line">    0x0001,     </div>
<div class="line">    0x0005,     </div>
<div class="line">    0x0017,     </div>
<div class="line">    0x0014      </div>
<div class="line">}</div>
</div><!-- fragment -->
<p>PL340 SDRAM controller configuration data. </p>

</div>
</div>
<a id="a0a8c4849ba3a8e317f00834e18287fe2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a8c4849ba3a8e317f00834e18287fe2">&#9670;&nbsp;</a></span>dgf_init</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> dgf_init[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    0x01fe7cf1,         </div>
<div class="line">    0x01febcf1,         </div>
<div class="line">    0x01fe7cf2,         </div>
<div class="line">    0x01febcf2,         </div>
<div class="line">    0x01fe7cf4,         </div>
<div class="line">    0x01febcf4,         </div>
<div class="line">    0x01fe7cf8,         </div>
<div class="line">    0x01febcf8,         </div>
<div class="line">    0x0001fcf1,         </div>
<div class="line">    0x0001fcf2,         </div>
<div class="line">    0x0001fcf4,         </div>
<div class="line">    0x0001fcf8,         </div>
<div class="line">    0x00000000,         </div>
<div class="line">    0x00000000,         </div>
<div class="line">    0x00000000,         </div>
<div class="line">    0x00000000          </div>
<div class="line">}</div>
</div><!-- fragment -->
<p>Default router diagnostic configuration. </p>
<p>Counter 0: local multicast packets <br  />
Counter 1: non-local multicast packets <br  />
Counter 2: local peer-to-peer packets <br  />
Counter 3: non-local peer-to-peer packets <br  />
Counter 4: local nearest-neighbour packets <br  />
Counter 5: non-local nearest-neighbour packets <br  />
Counter 6: local fixed-route packets <br  />
Counter 7: non-local fixed-route packets <br  />
Counter 8: dumped multicast packets <br  />
Counter 9: dumped peer-to-peer packets <br  />
Counter 10: dumped nearest-neighbour packets <br  />
Counter 11: dumped fixed-route packets <br  />
 Counters 12&ndash;15 are turned off by default and are fully available for users. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 30 2021 08:44:18 for spinnaker_tools by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
