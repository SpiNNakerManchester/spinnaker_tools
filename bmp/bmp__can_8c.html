<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>spinnaker_tools (BMP): bmp_can.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">spinnaker_tools (BMP)<span id="projectnumber">&#160;3.4.0</span>
   </div>
   <div id="projectbrief">SpiNNaker BMP firmware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">bmp_can.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>CAN hardware interface code for BMP LPC1768.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;lpc17xx.h&quot;</code><br />
<code>#include &quot;lpc17xx_clkpwr.h&quot;</code><br />
<code>#include &quot;<a class="el" href="bmp_8h_source.html">bmp.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structrx__desc__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__eth_8c.html#structrx__desc__t">rx_desc_t</a></td></tr>
<tr class="memdesc:structrx__desc__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ethernet receive descriptor.  <a href="bmp__eth_8c.html#structrx__desc__t">More...</a><br /></td></tr>
<tr class="separator:structrx__desc__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structtx__desc__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__eth_8c.html#structtx__desc__t">tx_desc_t</a></td></tr>
<tr class="memdesc:structtx__desc__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ethernet transmit descriptor.  <a href="bmp__eth_8c.html#structtx__desc__t">More...</a><br /></td></tr>
<tr class="separator:structtx__desc__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structstat__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#structstat__t">stat_t</a></td></tr>
<tr class="memdesc:structstat__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collects statistics about CAN messages.  <a href="bmp__can_8c.html#structstat__t">More...</a><br /></td></tr>
<tr class="separator:structstat__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a44405d3a2ffa18bb940340e3d83107ca"><td class="memItemLeft" align="right" valign="top"><a id="a44405d3a2ffa18bb940340e3d83107ca" name="a44405d3a2ffa18bb940340e3d83107ca"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CAN_NUM_STR</b>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:a44405d3a2ffa18bb940340e3d83107ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of CAN receive streams. <br /></td></tr>
<tr class="separator:a44405d3a2ffa18bb940340e3d83107ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f6a8e05a5af6338c6454c9437114193"><td class="memItemLeft" align="right" valign="top"><a id="a8f6a8e05a5af6338c6454c9437114193" name="a8f6a8e05a5af6338c6454c9437114193"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TX_OPEN_RETRY</b>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:a8f6a8e05a5af6338c6454c9437114193"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of retries to open. <br /></td></tr>
<tr class="separator:a8f6a8e05a5af6338c6454c9437114193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fecf0c361a1b333c4a4305db20e05ca"><td class="memItemLeft" align="right" valign="top"><a id="a9fecf0c361a1b333c4a4305db20e05ca" name="a9fecf0c361a1b333c4a4305db20e05ca"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TX_DATA_RETRY</b>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:a9fecf0c361a1b333c4a4305db20e05ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of retries to send data item. <br /></td></tr>
<tr class="separator:a9fecf0c361a1b333c4a4305db20e05ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeab4aa427c47665a35f82d7fe407ed8a"><td class="memItemLeft" align="right" valign="top"><a id="aeab4aa427c47665a35f82d7fe407ed8a" name="aeab4aa427c47665a35f82d7fe407ed8a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RX_CLOSE_RETRY</b>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:aeab4aa427c47665a35f82d7fe407ed8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of retries to close. <br /></td></tr>
<tr class="separator:aeab4aa427c47665a35f82d7fe407ed8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cd668c2e2ec37eee4cd744918989360"><td class="memItemLeft" align="right" valign="top"><a id="a2cd668c2e2ec37eee4cd744918989360" name="a2cd668c2e2ec37eee4cd744918989360"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CAN_OPEN_TO</b>&#160;&#160;&#160;1000</td></tr>
<tr class="memdesc:a2cd668c2e2ec37eee4cd744918989360"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time for receiver to return CAN_OPEN_ACK. <br /></td></tr>
<tr class="separator:a2cd668c2e2ec37eee4cd744918989360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c8f363c1bb2cf0b7634be56abe7de2a"><td class="memItemLeft" align="right" valign="top"><a id="a1c8f363c1bb2cf0b7634be56abe7de2a" name="a1c8f363c1bb2cf0b7634be56abe7de2a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CAN_CLOSE_TO</b>&#160;&#160;&#160;1000</td></tr>
<tr class="memdesc:a1c8f363c1bb2cf0b7634be56abe7de2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time for sender to return CAN_CLOSE_ACK. <br /></td></tr>
<tr class="separator:a1c8f363c1bb2cf0b7634be56abe7de2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8c66910c70b985d5fcc16a1a9457bd3"><td class="memItemLeft" align="right" valign="top"><a id="ab8c66910c70b985d5fcc16a1a9457bd3" name="ab8c66910c70b985d5fcc16a1a9457bd3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>STAT</b>(x)&#160;&#160;&#160;stat.x++;</td></tr>
<tr class="memdesc:ab8c66910c70b985d5fcc16a1a9457bd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increment the named field in <a class="el" href="bmp__can_8c.html#ae016e87b8ce542dc0f55bbf95624908c" title="Collects statistics about CAN messages.">stat</a>. <br /></td></tr>
<tr class="separator:ab8c66910c70b985d5fcc16a1a9457bd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63e32d00bc48471b4db49d481ac228dc"><td class="memItemLeft" align="right" valign="top"><a id="a63e32d00bc48471b4db49d481ac228dc" name="a63e32d00bc48471b4db49d481ac228dc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_PROC</b>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a63e32d00bc48471b4db49d481ac228dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">UPB of "proc_list" array. <br /></td></tr>
<tr class="separator:a63e32d00bc48471b4db49d481ac228dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab32bf863ffde0413c69de0da5cce0b2d"><td class="memItemLeft" align="right" valign="top"><a id="ab32bf863ffde0413c69de0da5cce0b2d" name="ab32bf863ffde0413c69de0da5cce0b2d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CAN_CLOCK</b>&#160;&#160;&#160;CLKPWR_PCLKSEL_CCLK_DIV_2</td></tr>
<tr class="memdesc:ab32bf863ffde0413c69de0da5cce0b2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clock divisor for the CAN. <br /></td></tr>
<tr class="separator:ab32bf863ffde0413c69de0da5cce0b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a127bb38cc5dc4588309e2008ce07f0a2"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a127bb38cc5dc4588309e2008ce07f0a2">can_sdp_command</a> { <br />
&#160;&#160;<a class="el" href="bmp__can_8c.html#a127bb38cc5dc4588309e2008ce07f0a2afc7fbd3af0ef110459d1cd934979208a">CAN_DATA</a> = 0
, <a class="el" href="bmp__can_8c.html#a127bb38cc5dc4588309e2008ce07f0a2a0bc19a96a5b792a3d653fd85a6df8d64">CAN_NACK</a> = 1
, <a class="el" href="bmp__can_8c.html#a127bb38cc5dc4588309e2008ce07f0a2a4b745ef22aefbad67607c8e0c2ec2b6f">CAN_OPEN_REQ</a> = 2
, <a class="el" href="bmp__can_8c.html#a127bb38cc5dc4588309e2008ce07f0a2a8bef3af7793700b05ff4144e49b3693c">CAN_OPEN_ACK</a> = 3
, <br />
&#160;&#160;<a class="el" href="bmp__can_8c.html#a127bb38cc5dc4588309e2008ce07f0a2aedfa0f237459330205c3fabe36bad5e0">CAN_CLOSE_REQ</a> = 4
, <a class="el" href="bmp__can_8c.html#a127bb38cc5dc4588309e2008ce07f0a2a76e6d59a64459a2db6fac8bc5bb59c24">CAN_CLOSE_ACK</a> = 5
, <a class="el" href="bmp__can_8c.html#a127bb38cc5dc4588309e2008ce07f0a2a9b996af3d2f4cdb453674fad986029cb">CAN_PROC</a> = 6
, <a class="el" href="bmp__can_8c.html#a127bb38cc5dc4588309e2008ce07f0a2afb33b3023118241fec062fe40271e1b2">CAN_EXEC</a> = 7
<br />
 }</td></tr>
<tr class="memdesc:a127bb38cc5dc4588309e2008ce07f0a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">CAN SDP command codes.  <a href="bmp__can_8c.html#a127bb38cc5dc4588309e2008ce07f0a2">More...</a><br /></td></tr>
<tr class="separator:a127bb38cc5dc4588309e2008ce07f0a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc4426e38a364a1ee9ff133de77124e8"><td class="memItemLeft" align="right" valign="top"><a id="abc4426e38a364a1ee9ff133de77124e8" name="abc4426e38a364a1ee9ff133de77124e8"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#abc4426e38a364a1ee9ff133de77124e8">can_sdp_sender_states</a> { <b>TX_IDLE</b> = 0
, <b>TX_OPEN_REQ</b> = 1
, <b>TX_DATA</b> = 2
 }</td></tr>
<tr class="memdesc:abc4426e38a364a1ee9ff133de77124e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">CAN SDP sender states. <br /></td></tr>
<tr class="separator:abc4426e38a364a1ee9ff133de77124e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06803b214476c54435bbe2bf2a59181f"><td class="memItemLeft" align="right" valign="top"><a id="a06803b214476c54435bbe2bf2a59181f" name="a06803b214476c54435bbe2bf2a59181f"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a06803b214476c54435bbe2bf2a59181f">can_sdp_receiver_states</a> { <b>RX_IDLE</b> = 0
, <b>RX_DATA</b> = 1
, <b>RX_CLOSE_REQ</b> = 2
 }</td></tr>
<tr class="memdesc:a06803b214476c54435bbe2bf2a59181f"><td class="mdescLeft">&#160;</td><td class="mdescRight">CAN SDP receiver states. <br /></td></tr>
<tr class="separator:a06803b214476c54435bbe2bf2a59181f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a249187aaa7f4e49506c44f83d64db58a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a249187aaa7f4e49506c44f83d64db58a">can_sdp_results</a> { <a class="el" href="bmp__can_8c.html#a249187aaa7f4e49506c44f83d64db58aa5928317cef672059c618635825a6d75c">RC_SDP_NOREPLY</a> = 0x8b
, <a class="el" href="bmp__can_8c.html#a249187aaa7f4e49506c44f83d64db58aa2b702a4c17bbd122c85b5be76f1b22ce">RC_SDP_REJECT</a> = 0x8c
, <a class="el" href="bmp__can_8c.html#a249187aaa7f4e49506c44f83d64db58aaf5909a4c863c9cd328ea4742cef1db62">RC_SDP_BUSY</a> = 0x8d
, <a class="el" href="bmp__can_8c.html#a249187aaa7f4e49506c44f83d64db58aa1df4687277a01165566c1ccb9b241834">RC_SDP_TIMEOUT</a> = 0x8e
 }</td></tr>
<tr class="memdesc:a249187aaa7f4e49506c44f83d64db58a"><td class="mdescLeft">&#160;</td><td class="mdescRight">SDP result codes that we care about (others are just passed through)  <a href="bmp__can_8c.html#a249187aaa7f4e49506c44f83d64db58a">More...</a><br /></td></tr>
<tr class="separator:a249187aaa7f4e49506c44f83d64db58a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a38953a595e20e956220961a6df6388"><td class="memItemLeft" align="right" valign="top"><a id="a0a38953a595e20e956220961a6df6388" name="a0a38953a595e20e956220961a6df6388"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a0a38953a595e20e956220961a6df6388">can_exec_opcodes</a> { <b>CAN_EXEC_NOP</b> = 0
, <b>CAN_EXEC_REQ</b> = 1
, <b>CAN_EXEC_ACK</b> = 2
 }</td></tr>
<tr class="memdesc:a0a38953a595e20e956220961a6df6388"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sub-opcodes used by <a class="el" href="bmp__can_8c.html#adb5f2a475d9ec5c3fadd1fa1ec6da9d0" title="Immediate execute. Arranges for proc_setup() to be called.">can_exec()</a> <br /></td></tr>
<tr class="separator:a0a38953a595e20e956220961a6df6388"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9756faa7a544e7e63c14692040e430a6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a9756faa7a544e7e63c14692040e430a6">can_tx1</a> (uint32_t dest, uint32_t id, uint32_t d1, uint32_t d2)</td></tr>
<tr class="memdesc:a9756faa7a544e7e63c14692040e430a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit using CAN buffer 1.  <a href="bmp__can_8c.html#a9756faa7a544e7e63c14692040e430a6">More...</a><br /></td></tr>
<tr class="separator:a9756faa7a544e7e63c14692040e430a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc9fe9f586b08f41f543d46f4bc84b3a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#adc9fe9f586b08f41f543d46f4bc84b3a">can_tx2</a> (uint32_t dest, uint32_t id, uint32_t d1, uint32_t d2)</td></tr>
<tr class="memdesc:adc9fe9f586b08f41f543d46f4bc84b3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit using CAN buffer 2.  <a href="bmp__can_8c.html#adc9fe9f586b08f41f543d46f4bc84b3a">More...</a><br /></td></tr>
<tr class="separator:adc9fe9f586b08f41f543d46f4bc84b3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6c7643e15b492c439380fdefccfbaa4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#ac6c7643e15b492c439380fdefccfbaa4">can_tx3_nr</a> (uint32_t dest, uint32_t id, uint32_t d1, uint32_t d2)</td></tr>
<tr class="memdesc:ac6c7643e15b492c439380fdefccfbaa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit using CAN buffer 3; <em>no retries</em>  <a href="bmp__can_8c.html#ac6c7643e15b492c439380fdefccfbaa4">More...</a><br /></td></tr>
<tr class="separator:ac6c7643e15b492c439380fdefccfbaa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab38058c7831b43300a7cd363de50341d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#ab38058c7831b43300a7cd363de50341d">timeout_event</a> (void *desc, <a class="el" href="bmp_8h.html#a0ab88001d910cc9c3284eff2bd36016f">event_proc</a> proc, uint32_t arg2, uint32_t time)</td></tr>
<tr class="memdesc:ab38058c7831b43300a7cd363de50341d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule an event when a timeout occurs.  <a href="bmp__can_8c.html#ab38058c7831b43300a7cd363de50341d">More...</a><br /></td></tr>
<tr class="separator:ab38058c7831b43300a7cd363de50341d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7de0433e1cc0015a4b9c27562a840a6c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a7de0433e1cc0015a4b9c27562a840a6c">can_open_ack</a> (uint32_t id)</td></tr>
<tr class="memdesc:a7de0433e1cc0015a4b9c27562a840a6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Received an CAN_OPEN_ACK packet from receiver.  <a href="bmp__can_8c.html#a7de0433e1cc0015a4b9c27562a840a6c">More...</a><br /></td></tr>
<tr class="separator:a7de0433e1cc0015a4b9c27562a840a6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ef2f6f1473d8e06be2601b25fba31a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#aa2ef2f6f1473d8e06be2601b25fba31a">can_close_req</a> (uint32_t id)</td></tr>
<tr class="memdesc:aa2ef2f6f1473d8e06be2601b25fba31a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Received CAN_CLOSE_REQ from receiver.  <a href="bmp__can_8c.html#aa2ef2f6f1473d8e06be2601b25fba31a">More...</a><br /></td></tr>
<tr class="separator:aa2ef2f6f1473d8e06be2601b25fba31a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39d98ec474dc67c8c12a282ff3444ee5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a39d98ec474dc67c8c12a282ff3444ee5">can_nack</a> (uint32_t id)</td></tr>
<tr class="memdesc:a39d98ec474dc67c8c12a282ff3444ee5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Received CAN_NACK from receiver because it found a packet out of sequence.  <a href="bmp__can_8c.html#a39d98ec474dc67c8c12a282ff3444ee5">More...</a><br /></td></tr>
<tr class="separator:a39d98ec474dc67c8c12a282ff3444ee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad871b49c1a145befebd15e8171a0b740"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#ad871b49c1a145befebd15e8171a0b740">can_data_timeout</a> (uint32_t a1, uint32_t a2)</td></tr>
<tr class="memdesc:ad871b49c1a145befebd15e8171a0b740"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timed out waiting for CAN_CLOSE_REQ or CAN_NACK.  <a href="bmp__can_8c.html#ad871b49c1a145befebd15e8171a0b740">More...</a><br /></td></tr>
<tr class="separator:ad871b49c1a145befebd15e8171a0b740"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a932a35a32b503e97020ea5b8ffefc261"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a932a35a32b503e97020ea5b8ffefc261">can_open_timeout</a> (uint32_t a1, uint32_t a2)</td></tr>
<tr class="memdesc:a932a35a32b503e97020ea5b8ffefc261"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timed out waiting for CAN_OPEN_ACK.  <a href="bmp__can_8c.html#a932a35a32b503e97020ea5b8ffefc261">More...</a><br /></td></tr>
<tr class="separator:a932a35a32b503e97020ea5b8ffefc261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5894be32a3327a9ba60d66cea2b61bb4"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a5894be32a3327a9ba60d66cea2b61bb4">can_send_msg</a> (uint32_t dest, <a class="el" href="bmp_8h.html#structsdp__msg__t">sdp_msg_t</a> *msg)</td></tr>
<tr class="memdesc:a5894be32a3327a9ba60d66cea2b61bb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an SDP message over the CAN.  <a href="bmp__can_8c.html#a5894be32a3327a9ba60d66cea2b61bb4">More...</a><br /></td></tr>
<tr class="separator:a5894be32a3327a9ba60d66cea2b61bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a803802a85da707fa8ac1ab64f75a38"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a9a803802a85da707fa8ac1ab64f75a38">can_open_req</a> (uint32_t id)</td></tr>
<tr class="memdesc:a9a803802a85da707fa8ac1ab64f75a38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Someone wishes to send us an SDP packet; received CAN_OPEN_REQ.  <a href="bmp__can_8c.html#a9a803802a85da707fa8ac1ab64f75a38">More...</a><br /></td></tr>
<tr class="separator:a9a803802a85da707fa8ac1ab64f75a38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fd381e10e3819b52cd732a7b4069ec0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a5fd381e10e3819b52cd732a7b4069ec0">can_close_ack</a> (uint32_t id)</td></tr>
<tr class="memdesc:a5fd381e10e3819b52cd732a7b4069ec0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Received CAN_CLOSE_ACK from sender.  <a href="bmp__can_8c.html#a5fd381e10e3819b52cd732a7b4069ec0">More...</a><br /></td></tr>
<tr class="separator:a5fd381e10e3819b52cd732a7b4069ec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8debf36c9a745df8bc32620829b38b03"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a8debf36c9a745df8bc32620829b38b03">can_close_timeout</a> (uint32_t arg1, uint32_t arg2)</td></tr>
<tr class="memdesc:a8debf36c9a745df8bc32620829b38b03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receiver timed out waiting for CAN_CLOSE_ACK.  <a href="bmp__can_8c.html#a8debf36c9a745df8bc32620829b38b03">More...</a><br /></td></tr>
<tr class="separator:a8debf36c9a745df8bc32620829b38b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa68918266afb1561ede4a6e90087ed6b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#aa68918266afb1561ede4a6e90087ed6b">can_data</a> (uint32_t id, uint32_t d1, uint32_t d2)</td></tr>
<tr class="memdesc:aa68918266afb1561ede4a6e90087ed6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when CAN_DATA packet arrives.  <a href="bmp__can_8c.html#aa68918266afb1561ede4a6e90087ed6b">More...</a><br /></td></tr>
<tr class="separator:aa68918266afb1561ede4a6e90087ed6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac51a4f690c17e8dfe99fecdec0acd3e4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#ac51a4f690c17e8dfe99fecdec0acd3e4">can_proc</a> (uint32_t id, uint32_t d1, uint32_t d2)</td></tr>
<tr class="memdesc:ac51a4f690c17e8dfe99fecdec0acd3e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a command immediately; handles CAN_PROC events.  <a href="bmp__can_8c.html#ac51a4f690c17e8dfe99fecdec0acd3e4">More...</a><br /></td></tr>
<tr class="separator:ac51a4f690c17e8dfe99fecdec0acd3e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f5eaac72e01db2e7475fdb129e3850a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a8f5eaac72e01db2e7475fdb129e3850a">proc_setup</a> (uint32_t d1, uint32_t d2)</td></tr>
<tr class="memdesc:a8f5eaac72e01db2e7475fdb129e3850a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up networking. Handles remote request across CAN from BMP master.  <a href="bmp__can_8c.html#a8f5eaac72e01db2e7475fdb129e3850a">More...</a><br /></td></tr>
<tr class="separator:a8f5eaac72e01db2e7475fdb129e3850a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb5f2a475d9ec5c3fadd1fa1ec6da9d0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#adb5f2a475d9ec5c3fadd1fa1ec6da9d0">can_exec</a> (uint32_t id, uint32_t d1, uint32_t d2)</td></tr>
<tr class="memdesc:adb5f2a475d9ec5c3fadd1fa1ec6da9d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Immediate execute. Arranges for <a class="el" href="bmp__can_8c.html#a8f5eaac72e01db2e7475fdb129e3850a" title="Set up networking. Handles remote request across CAN from BMP master.">proc_setup()</a> to be called.  <a href="bmp__can_8c.html#adb5f2a475d9ec5c3fadd1fa1ec6da9d0">More...</a><br /></td></tr>
<tr class="separator:adb5f2a475d9ec5c3fadd1fa1ec6da9d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae041ce291b0475352c3946139fc4345e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#ae041ce291b0475352c3946139fc4345e">can_proc_cmd</a> (uint32_t dest, uint32_t op, uint32_t arg1, uint32_t arg2)</td></tr>
<tr class="memdesc:ae041ce291b0475352c3946139fc4345e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asks another BMP to run a proc from <a class="el" href="bmp__can_8c.html#a1b9becfd629c2c68273a7c0c655cddc8" title="Operations that can be run &quot;immediately&quot; by can_proc()">proc_list</a>.  <a href="bmp__can_8c.html#ae041ce291b0475352c3946139fc4345e">More...</a><br /></td></tr>
<tr class="separator:ae041ce291b0475352c3946139fc4345e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d7c808adb67dec04560acc3d75ea6d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a0d7c808adb67dec04560acc3d75ea6d3">can_timer</a> (void)</td></tr>
<tr class="memdesc:a0d7c808adb67dec04560acc3d75ea6d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is called every 10ms on all boards.  <a href="bmp__can_8c.html#a0d7c808adb67dec04560acc3d75ea6d3">More...</a><br /></td></tr>
<tr class="separator:a0d7c808adb67dec04560acc3d75ea6d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d1120d0271e11535def5f56d375e9a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a7d1120d0271e11535def5f56d375e9a9">CAN_IRQHandler</a> (void)</td></tr>
<tr class="memdesc:a7d1120d0271e11535def5f56d375e9a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for receiving a message off the CAN.  <a href="bmp__can_8c.html#a7d1120d0271e11535def5f56d375e9a9">More...</a><br /></td></tr>
<tr class="separator:a7d1120d0271e11535def5f56d375e9a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac003219724e49da044a9f68876542a3d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#ac003219724e49da044a9f68876542a3d">configure_can</a> (uint32_t id)</td></tr>
<tr class="memdesc:ac003219724e49da044a9f68876542a3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the CAN controller.  <a href="bmp__can_8c.html#ac003219724e49da044a9f68876542a3d">More...</a><br /></td></tr>
<tr class="separator:ac003219724e49da044a9f68876542a3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a217cc657c1dc42c252f3ef7ef6b48351"><td class="memItemLeft" align="right" valign="top"><a id="a217cc657c1dc42c252f3ef7ef6b48351" name="a217cc657c1dc42c252f3ef7ef6b48351"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>config1</b></td></tr>
<tr class="memdesc:a217cc657c1dc42c252f3ef7ef6b48351"><td class="mdescLeft">&#160;</td><td class="mdescRight">Argument <code>d1</code> to pass to <a class="el" href="bmp__can_8c.html#a8f5eaac72e01db2e7475fdb129e3850a" title="Set up networking. Handles remote request across CAN from BMP master.">proc_setup()</a> <br /></td></tr>
<tr class="separator:a217cc657c1dc42c252f3ef7ef6b48351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0f0562ab6f92c86ca3c459d185c5231"><td class="memItemLeft" align="right" valign="top"><a id="ae0f0562ab6f92c86ca3c459d185c5231" name="ae0f0562ab6f92c86ca3c459d185c5231"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>config2</b></td></tr>
<tr class="memdesc:ae0f0562ab6f92c86ca3c459d185c5231"><td class="mdescLeft">&#160;</td><td class="mdescRight">Argument <code>d2</code> to pass to <a class="el" href="bmp__can_8c.html#a8f5eaac72e01db2e7475fdb129e3850a" title="Set up networking. Handles remote request across CAN from BMP master.">proc_setup()</a> <br /></td></tr>
<tr class="separator:ae0f0562ab6f92c86ca3c459d185c5231"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac13dd46e9f0b647e1703a96ba55df124"><td class="memItemLeft" align="right" valign="top"><a id="ac13dd46e9f0b647e1703a96ba55df124" name="ac13dd46e9f0b647e1703a96ba55df124"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>can_status</b> [<a class="el" href="bmp_8h.html#a4b4e786947266ec7b27747adf99779c1">CAN_SIZE</a>]</td></tr>
<tr class="memdesc:ac13dd46e9f0b647e1703a96ba55df124"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether a particular board is talking to the CAN bus. <br /></td></tr>
<tr class="separator:ac13dd46e9f0b647e1703a96ba55df124"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a381ebaa72db37141357c24de6838f225"><td class="memItemLeft" align="right" valign="top"><a id="a381ebaa72db37141357c24de6838f225" name="a381ebaa72db37141357c24de6838f225"></a>
static <a class="el" href="bmp__eth_8c.html#structrx__desc__t">rx_desc_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>rx_desc_table</b> [<a class="el" href="bmp__can_8c.html#a44405d3a2ffa18bb940340e3d83107ca">CAN_NUM_STR</a>]</td></tr>
<tr class="memdesc:a381ebaa72db37141357c24de6838f225"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive descriptors. <br /></td></tr>
<tr class="separator:a381ebaa72db37141357c24de6838f225"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c337358902acd9ddd734da67820e378"><td class="memItemLeft" align="right" valign="top"><a id="a7c337358902acd9ddd734da67820e378" name="a7c337358902acd9ddd734da67820e378"></a>
static <a class="el" href="bmp__eth_8c.html#structtx__desc__t">tx_desc_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>tx_desc_str</b></td></tr>
<tr class="memdesc:a7c337358902acd9ddd734da67820e378"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit descriptor storage. <br /></td></tr>
<tr class="separator:a7c337358902acd9ddd734da67820e378"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11370d281315848db47925ec4533a640"><td class="memItemLeft" align="right" valign="top"><a id="a11370d281315848db47925ec4533a640" name="a11370d281315848db47925ec4533a640"></a>
static <a class="el" href="bmp__eth_8c.html#structtx__desc__t">tx_desc_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>tx_desc</b> = &amp;<a class="el" href="bmp__can_8c.html#a7c337358902acd9ddd734da67820e378">tx_desc_str</a></td></tr>
<tr class="memdesc:a11370d281315848db47925ec4533a640"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit descriptor. <br /></td></tr>
<tr class="separator:a11370d281315848db47925ec4533a640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2080749590da1d630f4f5b2894791c78"><td class="memItemLeft" align="right" valign="top"><a id="a2080749590da1d630f4f5b2894791c78" name="a2080749590da1d630f4f5b2894791c78"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>bus_timeout</b></td></tr>
<tr class="memdesc:a2080749590da1d630f4f5b2894791c78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to work out when to show the LED indicating a bus timeout. <br /></td></tr>
<tr class="separator:a2080749590da1d630f4f5b2894791c78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af32e9d7317bfab573939a6efb29f51b2"><td class="memItemLeft" align="right" valign="top"><a id="af32e9d7317bfab573939a6efb29f51b2" name="af32e9d7317bfab573939a6efb29f51b2"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>can_timeout</b></td></tr>
<tr class="memdesc:af32e9d7317bfab573939a6efb29f51b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to work out when to show the LED indicating a CAN timeout. <br /></td></tr>
<tr class="separator:af32e9d7317bfab573939a6efb29f51b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893bb4543978e7962685e44d8a38215f"><td class="memItemLeft" align="right" valign="top"><a id="a893bb4543978e7962685e44d8a38215f" name="a893bb4543978e7962685e44d8a38215f"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><b>had_CAN_req</b></td></tr>
<tr class="memdesc:a893bb4543978e7962685e44d8a38215f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether we had a request on the CAN bus. <br /></td></tr>
<tr class="separator:a893bb4543978e7962685e44d8a38215f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae016e87b8ce542dc0f55bbf95624908c"><td class="memItemLeft" align="right" valign="top"><a id="ae016e87b8ce542dc0f55bbf95624908c" name="ae016e87b8ce542dc0f55bbf95624908c"></a>
<a class="el" href="bmp__can_8c.html#structstat__t">stat_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>stat</b></td></tr>
<tr class="memdesc:ae016e87b8ce542dc0f55bbf95624908c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collects statistics about CAN messages. <br /></td></tr>
<tr class="separator:ae016e87b8ce542dc0f55bbf95624908c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b9becfd629c2c68273a7c0c655cddc8"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="bmp_8h.html#a0ab88001d910cc9c3284eff2bd36016f">event_proc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bmp__can_8c.html#a1b9becfd629c2c68273a7c0c655cddc8">proc_list</a> []</td></tr>
<tr class="memdesc:a1b9becfd629c2c68273a7c0c655cddc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Operations that can be run "immediately" by <a class="el" href="bmp__can_8c.html#ac51a4f690c17e8dfe99fecdec0acd3e4" title="Add a command immediately; handles CAN_PROC events.">can_proc()</a>  <a href="bmp__can_8c.html#a1b9becfd629c2c68273a7c0c655cddc8">More...</a><br /></td></tr>
<tr class="separator:a1b9becfd629c2c68273a7c0c655cddc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a459a7de19d9771bf9bf97825542dcf"><td class="memItemLeft" align="right" valign="top"><a id="a4a459a7de19d9771bf9bf97825542dcf" name="a4a459a7de19d9771bf9bf97825542dcf"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>can_req</b> [<a class="el" href="bmp_8h.html#a4b4e786947266ec7b27747adf99779c1">CAN_SIZE</a>]</td></tr>
<tr class="memdesc:a4a459a7de19d9771bf9bf97825542dcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count CAN_EXEC_REQ. <br /></td></tr>
<tr class="separator:a4a459a7de19d9771bf9bf97825542dcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf3828fdd0530080bb09e46301854214"><td class="memItemLeft" align="right" valign="top"><a id="acf3828fdd0530080bb09e46301854214" name="acf3828fdd0530080bb09e46301854214"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>can_ack</b> [<a class="el" href="bmp_8h.html#a4b4e786947266ec7b27747adf99779c1">CAN_SIZE</a>]</td></tr>
<tr class="memdesc:acf3828fdd0530080bb09e46301854214"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count CAN_EXEC_ACK. <br /></td></tr>
<tr class="separator:acf3828fdd0530080bb09e46301854214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b3a5d0512fd4732885045bd880a2193"><td class="memItemLeft" align="right" valign="top"><a id="a1b3a5d0512fd4732885045bd880a2193" name="a1b3a5d0512fd4732885045bd880a2193"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>can_next</b></td></tr>
<tr class="memdesc:a1b3a5d0512fd4732885045bd880a2193"><td class="mdescLeft">&#160;</td><td class="mdescRight">The index of the next board to talk to in <a class="el" href="bmp_8h.html#a5991583fe7d6b81e3a14f8c72c617a53" title="Mapping from CAN ID to board number.">can2board</a>. <br /></td></tr>
<tr class="separator:a1b3a5d0512fd4732885045bd880a2193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1f5fdea23b4680fbd47608476e8eaba"><td class="memItemLeft" align="right" valign="top"><a id="aa1f5fdea23b4680fbd47608476e8eaba" name="aa1f5fdea23b4680fbd47608476e8eaba"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>can_seq</b></td></tr>
<tr class="memdesc:aa1f5fdea23b4680fbd47608476e8eaba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sequence number for CAN requests. <br /></td></tr>
<tr class="separator:aa1f5fdea23b4680fbd47608476e8eaba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >CAN hardware interface code for BMP LPC1768. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>&copy; The University of Manchester - 2012-2015</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Steve Temple, APT Group, School of Computer Science </dd></dl>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structrx__desc__t" id="structrx__desc__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structrx__desc__t">&#9670;&#160;</a></span>rx_desc_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rx_desc_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p >Ethernet receive descriptor. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a73cfc77547831117e3c98c04b6256015" name="a73cfc77547831117e3c98c04b6256015"></a><a class="el" href="bmp_8h.html#structevent__t">event_t</a> *</td>
<td class="fieldname">
event</td>
<td class="fielddoc">
Event and ID must be first in struct. </td></tr>
<tr><td class="fieldtype">
<a id="a92299a9c77f5f2477bf475f60075a1fb" name="a92299a9c77f5f2477bf475f60075a1fb"></a>uint32_t</td>
<td class="fieldname">
event_id</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a49c245e6b34a8282f57298d3f8c5a795" name="a49c245e6b34a8282f57298d3f8c5a795"></a>uint8_t</td>
<td class="fieldname">
state</td>
<td class="fielddoc">
State variable. </td></tr>
<tr><td class="fieldtype">
<a id="ad8a2c4750ad6963cb5dfa9237725151e" name="ad8a2c4750ad6963cb5dfa9237725151e"></a>uint8_t</td>
<td class="fieldname">
tid</td>
<td class="fielddoc">
Tx ID of sender. </td></tr>
<tr><td class="fieldtype">
<a id="a402c394300bd6f657aa8ff38cf829499" name="a402c394300bd6f657aa8ff38cf829499"></a>uint8_t</td>
<td class="fieldname">
srce</td>
<td class="fielddoc">
Source address of sender. </td></tr>
<tr><td class="fieldtype">
<a id="a8a53842fbe257266c5de5761326d0a4f" name="a8a53842fbe257266c5de5761326d0a4f"></a>uint8_t</td>
<td class="fieldname">
last</td>
<td class="fielddoc">
Sequence number of last packet in message. </td></tr>
<tr><td class="fieldtype">
<a id="a78b99b74e40c6d1ba8a808582de77139" name="a78b99b74e40c6d1ba8a808582de77139"></a>uint8_t</td>
<td class="fieldname">
seq</td>
<td class="fielddoc">
Expected sequence number. </td></tr>
<tr><td class="fieldtype">
<a id="a051ed7fe56de9b49f45c1b00cbe6c478" name="a051ed7fe56de9b49f45c1b00cbe6c478"></a>uint8_t</td>
<td class="fieldname">
retry</td>
<td class="fielddoc">
Counts retries for can_close_req. </td></tr>
<tr><td class="fieldtype">
<a id="af5b104ac6a2dd505975e5ba8d8ca0520" name="af5b104ac6a2dd505975e5ba8d8ca0520"></a>uint32_t *</td>
<td class="fieldname">
buf</td>
<td class="fielddoc">
Pointer to buffer in SDP message. </td></tr>
<tr><td class="fieldtype">
<a id="ae475377178f88cbd60a8b4d16893088c" name="ae475377178f88cbd60a8b4d16893088c"></a><a class="el" href="bmp_8h.html#structsdp__msg__t">sdp_msg_t</a> *</td>
<td class="fieldname">
msg</td>
<td class="fielddoc">
Pointer to SDP message. </td></tr>
<tr><td class="fieldtype">
<a id="a7fc743b9d1e3ac279f9ad78ccb306eab" name="a7fc743b9d1e3ac279f9ad78ccb306eab"></a>uint32_t</td>
<td class="fieldname">
Packet</td>
<td class="fielddoc">
Receive Packet Descriptor. </td></tr>
<tr><td class="fieldtype">
<a id="a5a0aebd0cf1829afc80f31fbda7d4292" name="a5a0aebd0cf1829afc80f31fbda7d4292"></a>uint32_t</td>
<td class="fieldname">
Ctrl</td>
<td class="fielddoc">
Receive Control Descriptor. </td></tr>
</table>

</div>
</div>
<a name="structtx__desc__t" id="structtx__desc__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structtx__desc__t">&#9670;&#160;</a></span>tx_desc_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tx_desc_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p >Ethernet transmit descriptor. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a8e96dcb18e9e215c19263cfc0f854818" name="a8e96dcb18e9e215c19263cfc0f854818"></a><a class="el" href="bmp_8h.html#structevent__t">event_t</a> *</td>
<td class="fieldname">
event</td>
<td class="fielddoc">
Event and ID must be first in struct. </td></tr>
<tr><td class="fieldtype">
<a id="a01c5a888feae59b61a6d72127f4b2a26" name="a01c5a888feae59b61a6d72127f4b2a26"></a>uint32_t</td>
<td class="fieldname">
event_id</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a58b160054e3979da5d3ed0a86584a1f8" name="a58b160054e3979da5d3ed0a86584a1f8"></a>uint8_t</td>
<td class="fieldname">
state</td>
<td class="fielddoc">
State variable. </td></tr>
<tr><td class="fieldtype">
<a id="a7a7ab794bd84268878a60af7c65fe264" name="a7a7ab794bd84268878a60af7c65fe264"></a>uint8_t</td>
<td class="fieldname">
rid</td>
<td class="fielddoc">
Rx ID at receiver. </td></tr>
<tr><td class="fieldtype">
<a id="a13d7328a785683f0919eb4c3b5456098" name="a13d7328a785683f0919eb4c3b5456098"></a>uint8_t</td>
<td class="fieldname">
tid</td>
<td class="fielddoc">
Tx ID. </td></tr>
<tr><td class="fieldtype">
<a id="aa6c1d0c644634067d92b5f07cdc2827d" name="aa6c1d0c644634067d92b5f07cdc2827d"></a>volatile uint8_t</td>
<td class="fieldname">
seq</td>
<td class="fielddoc">
Sequence number for sent DATA packets. </td></tr>
<tr><td class="fieldtype">
<a id="ac4defb0402c1e0a0059c21975d473be6" name="ac4defb0402c1e0a0059c21975d473be6"></a>uint8_t</td>
<td class="fieldname">
dest</td>
<td class="fielddoc">
Address of receiver. </td></tr>
<tr><td class="fieldtype">
<a id="a89fdbf63afb521d4fda99285e3189d71" name="a89fdbf63afb521d4fda99285e3189d71"></a>uint8_t</td>
<td class="fieldname">
rc</td>
<td class="fielddoc">
Return code. </td></tr>
<tr><td class="fieldtype">
<a id="a1e7fa45d1ce71da78b11547cfb14d9a6" name="a1e7fa45d1ce71da78b11547cfb14d9a6"></a>uint8_t</td>
<td class="fieldname">
delay</td>
<td class="fielddoc">
Packet delay (not used yet) </td></tr>
<tr><td class="fieldtype">
<a id="ae1f0fa9135daaa9d3de7424f5efe947a" name="ae1f0fa9135daaa9d3de7424f5efe947a"></a>volatile uint8_t</td>
<td class="fieldname">
ack</td>
<td class="fielddoc">
Ack variable set by interrupt routines. </td></tr>
<tr><td class="fieldtype">
<a id="a932834f3fc81057d313898b9e5ef9499" name="a932834f3fc81057d313898b9e5ef9499"></a>uint32_t</td>
<td class="fieldname">
Packet</td>
<td class="fielddoc">
Transmit Packet Descriptor. </td></tr>
<tr><td class="fieldtype">
<a id="adec5fd3458453e7dbcd6f081634cc840" name="adec5fd3458453e7dbcd6f081634cc840"></a>uint32_t</td>
<td class="fieldname">
Ctrl</td>
<td class="fielddoc">
Transmit Control Descriptor. </td></tr>
</table>

</div>
</div>
<a name="structstat__t" id="structstat__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structstat__t">&#9670;&#160;</a></span>stat_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct stat_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p >Collects statistics about CAN messages. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a865c2c313cfbdd94feff36a6878cc824" name="a865c2c313cfbdd94feff36a6878cc824"></a>uint32_t</td>
<td class="fieldname">
send_msg</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a3d26da5ea35c173620be3a8613fb9796" name="a3d26da5ea35c173620be3a8613fb9796"></a>uint32_t</td>
<td class="fieldname">
rc_route</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ad91f6cd9b63b6f959899cf82a729ba5e" name="ad91f6cd9b63b6f959899cf82a729ba5e"></a>uint32_t</td>
<td class="fieldname">
timeout</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a2408f8c9d28ab1728d166bd0214d87e2" name="a2408f8c9d28ab1728d166bd0214d87e2"></a>uint32_t</td>
<td class="fieldname">
can_nack</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="af0f0132cc180e846f66cdd3f267f6121" name="af0f0132cc180e846f66cdd3f267f6121"></a>uint32_t</td>
<td class="fieldname">
close_req</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a25b186c3accf8ab939d6b78f7ff2e562" name="a25b186c3accf8ab939d6b78f7ff2e562"></a>uint32_t</td>
<td class="fieldname">
data_timeout</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="aeb6f4c2e819999054a4b19d73293f265" name="aeb6f4c2e819999054a4b19d73293f265"></a>uint32_t</td>
<td class="fieldname">
open_timeout</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a25da8f41048873a28b9a1127bd549a90" name="a25da8f41048873a28b9a1127bd549a90"></a>uint32_t</td>
<td class="fieldname">
open_ack</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ac155e3f264d305aca878547d3d45a2b1" name="ac155e3f264d305aca878547d3d45a2b1"></a>uint32_t</td>
<td class="fieldname">
reject</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="abc0ce86d537d5f749f3bfd6bd72ff63e" name="abc0ce86d537d5f749f3bfd6bd72ff63e"></a>uint32_t</td>
<td class="fieldname">
close_ack</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a0aefdb6788095549f72f33833c253e6e" name="a0aefdb6788095549f72f33833c253e6e"></a>uint32_t</td>
<td class="fieldname">
open_fail</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a2ac7ba40068d4ff6797b815fb8c792d1" name="a2ac7ba40068d4ff6797b815fb8c792d1"></a>uint32_t</td>
<td class="fieldname">
rxseq_error</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a127bb38cc5dc4588309e2008ce07f0a2" name="a127bb38cc5dc4588309e2008ce07f0a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a127bb38cc5dc4588309e2008ce07f0a2">&#9670;&#160;</a></span>can_sdp_command</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="bmp__can_8c.html#a127bb38cc5dc4588309e2008ce07f0a2">can_sdp_command</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CAN SDP command codes. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a127bb38cc5dc4588309e2008ce07f0a2afc7fbd3af0ef110459d1cd934979208a" name="a127bb38cc5dc4588309e2008ce07f0a2afc7fbd3af0ef110459d1cd934979208a"></a>CAN_DATA&#160;</td><td class="fielddoc"><p >Payload when sending SDP over CAN. </p>
</td></tr>
<tr><td class="fieldname"><a id="a127bb38cc5dc4588309e2008ce07f0a2a0bc19a96a5b792a3d653fd85a6df8d64" name="a127bb38cc5dc4588309e2008ce07f0a2a0bc19a96a5b792a3d653fd85a6df8d64"></a>CAN_NACK&#160;</td><td class="fielddoc"><p >Restart sequence. </p>
</td></tr>
<tr><td class="fieldname"><a id="a127bb38cc5dc4588309e2008ce07f0a2a4b745ef22aefbad67607c8e0c2ec2b6f" name="a127bb38cc5dc4588309e2008ce07f0a2a4b745ef22aefbad67607c8e0c2ec2b6f"></a>CAN_OPEN_REQ&#160;</td><td class="fielddoc"><p >Request to start sending. </p>
</td></tr>
<tr><td class="fieldname"><a id="a127bb38cc5dc4588309e2008ce07f0a2a8bef3af7793700b05ff4144e49b3693c" name="a127bb38cc5dc4588309e2008ce07f0a2a8bef3af7793700b05ff4144e49b3693c"></a>CAN_OPEN_ACK&#160;</td><td class="fielddoc"><p >Permission to start sending. </p>
</td></tr>
<tr><td class="fieldname"><a id="a127bb38cc5dc4588309e2008ce07f0a2aedfa0f237459330205c3fabe36bad5e0" name="a127bb38cc5dc4588309e2008ce07f0a2aedfa0f237459330205c3fabe36bad5e0"></a>CAN_CLOSE_REQ&#160;</td><td class="fielddoc"><p >Message complete. </p>
</td></tr>
<tr><td class="fieldname"><a id="a127bb38cc5dc4588309e2008ce07f0a2a76e6d59a64459a2db6fac8bc5bb59c24" name="a127bb38cc5dc4588309e2008ce07f0a2a76e6d59a64459a2db6fac8bc5bb59c24"></a>CAN_CLOSE_ACK&#160;</td><td class="fielddoc"><p >Message complete acknowledge. </p>
</td></tr>
<tr><td class="fieldname"><a id="a127bb38cc5dc4588309e2008ce07f0a2a9b996af3d2f4cdb453674fad986029cb" name="a127bb38cc5dc4588309e2008ce07f0a2a9b996af3d2f4cdb453674fad986029cb"></a>CAN_PROC&#160;</td><td class="fielddoc"><p >Initiate a "proc". </p>
</td></tr>
<tr><td class="fieldname"><a id="a127bb38cc5dc4588309e2008ce07f0a2afb33b3023118241fec062fe40271e1b2" name="a127bb38cc5dc4588309e2008ce07f0a2afb33b3023118241fec062fe40271e1b2"></a>CAN_EXEC&#160;</td><td class="fielddoc"><p >Immediate command. </p>
</td></tr>
</table>

</div>
</div>
<a id="a249187aaa7f4e49506c44f83d64db58a" name="a249187aaa7f4e49506c44f83d64db58a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a249187aaa7f4e49506c44f83d64db58a">&#9670;&#160;</a></span>can_sdp_results</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="bmp__can_8c.html#a249187aaa7f4e49506c44f83d64db58a">can_sdp_results</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SDP result codes that we care about (others are just passed through) </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a249187aaa7f4e49506c44f83d64db58aa5928317cef672059c618635825a6d75c" name="a249187aaa7f4e49506c44f83d64db58aa5928317cef672059c618635825a6d75c"></a>RC_SDP_NOREPLY&#160;</td><td class="fielddoc"><p >No reply to open. </p>
</td></tr>
<tr><td class="fieldname"><a id="a249187aaa7f4e49506c44f83d64db58aa2b702a4c17bbd122c85b5be76f1b22ce" name="a249187aaa7f4e49506c44f83d64db58aa2b702a4c17bbd122c85b5be76f1b22ce"></a>RC_SDP_REJECT&#160;</td><td class="fielddoc"><p >Open rejected. </p>
</td></tr>
<tr><td class="fieldname"><a id="a249187aaa7f4e49506c44f83d64db58aaf5909a4c863c9cd328ea4742cef1db62" name="a249187aaa7f4e49506c44f83d64db58aaf5909a4c863c9cd328ea4742cef1db62"></a>RC_SDP_BUSY&#160;</td><td class="fielddoc"><p >Dest busy. </p>
</td></tr>
<tr><td class="fieldname"><a id="a249187aaa7f4e49506c44f83d64db58aa1df4687277a01165566c1ccb9b241834" name="a249187aaa7f4e49506c44f83d64db58aa1df4687277a01165566c1ccb9b241834"></a>RC_SDP_TIMEOUT&#160;</td><td class="fielddoc"><p >Dest died? </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9756faa7a544e7e63c14692040e430a6" name="a9756faa7a544e7e63c14692040e430a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9756faa7a544e7e63c14692040e430a6">&#9670;&#160;</a></span>can_tx1()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void can_tx1 </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transmit using CAN buffer 1. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dest</td><td>who to transmit to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>operation code? </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d1</td><td>payload value 1 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d2</td><td>payload value 2 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adc9fe9f586b08f41f543d46f4bc84b3a" name="adc9fe9f586b08f41f543d46f4bc84b3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc9fe9f586b08f41f543d46f4bc84b3a">&#9670;&#160;</a></span>can_tx2()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void can_tx2 </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transmit using CAN buffer 2. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dest</td><td>who to transmit to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>operation code? </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d1</td><td>payload value 1 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d2</td><td>payload value 2 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac6c7643e15b492c439380fdefccfbaa4" name="ac6c7643e15b492c439380fdefccfbaa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6c7643e15b492c439380fdefccfbaa4">&#9670;&#160;</a></span>can_tx3_nr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void can_tx3_nr </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transmit using CAN buffer 3; <em>no retries</em> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dest</td><td>who to transmit to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>operation code? </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d1</td><td>payload value 1 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d2</td><td>payload value 2 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab38058c7831b43300a7cd363de50341d" name="ab38058c7831b43300a7cd363de50341d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab38058c7831b43300a7cd363de50341d">&#9670;&#160;</a></span>timeout_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void timeout_event </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="bmp_8h.html#a0ab88001d910cc9c3284eff2bd36016f">event_proc</a>&#160;</td>
          <td class="paramname"><em>proc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Schedule an event when a timeout occurs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">desc</td><td>A transmit descriptor or a receive descriptor. (Uses first two common fields only.) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">proc</td><td>Callback to handle timeout </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg2</td><td>Second argument to callback </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">time</td><td>How far ahead to schedule the timeout </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7de0433e1cc0015a4b9c27562a840a6c" name="a7de0433e1cc0015a4b9c27562a840a6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7de0433e1cc0015a4b9c27562a840a6c">&#9670;&#160;</a></span>can_open_ack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void can_open_ack </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Received an CAN_OPEN_ACK packet from receiver. </p>
<p >Unless return code says "busy" move to state TX_DATA and fill in "tx_desc". If busy, set a packet delay and allow more requests to be sent. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Describes what is going on </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa2ef2f6f1473d8e06be2601b25fba31a" name="aa2ef2f6f1473d8e06be2601b25fba31a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2ef2f6f1473d8e06be2601b25fba31a">&#9670;&#160;</a></span>can_close_req()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void can_close_req </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Received CAN_CLOSE_REQ from receiver. </p>
<p >If TX_DATA then signal in "ack". In any case, send a CAN_CLOSE_ACK back to receiver. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Describes what is going on </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a39d98ec474dc67c8c12a282ff3444ee5" name="a39d98ec474dc67c8c12a282ff3444ee5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39d98ec474dc67c8c12a282ff3444ee5">&#9670;&#160;</a></span>can_nack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void can_nack </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Received CAN_NACK from receiver because it found a packet out of sequence. </p>
<p >Restart from the sequence number provided by receiver. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Describes what is going on </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad871b49c1a145befebd15e8171a0b740" name="ad871b49c1a145befebd15e8171a0b740"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad871b49c1a145befebd15e8171a0b740">&#9670;&#160;</a></span>can_data_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void can_data_timeout </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>a1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>a2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Timed out waiting for CAN_CLOSE_REQ or CAN_NACK. </p>
<p >Set "tx_desc-&gt;ack" to 3 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">a1</td><td>Transmission descriptor </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">a2</td><td>Marker value (3) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a932a35a32b503e97020ea5b8ffefc261" name="a932a35a32b503e97020ea5b8ffefc261"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a932a35a32b503e97020ea5b8ffefc261">&#9670;&#160;</a></span>can_open_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void can_open_timeout </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>a1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>a2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Timed out waiting for CAN_OPEN_ACK. </p>
<p >Set "tx_desc-&gt;ack" to 2 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">a1</td><td>Transmission descriptor </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">a2</td><td>Marker value (2) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5894be32a3327a9ba60d66cea2b61bb4" name="a5894be32a3327a9ba60d66cea2b61bb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5894be32a3327a9ba60d66cea2b61bb4">&#9670;&#160;</a></span>can_send_msg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t can_send_msg </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="bmp_8h.html#structsdp__msg__t">sdp_msg_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an SDP message over the CAN. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dest</td><td>Which board to send to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>The message to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SDP response code </dd></dl>

</div>
</div>
<a id="a9a803802a85da707fa8ac1ab64f75a38" name="a9a803802a85da707fa8ac1ab64f75a38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a803802a85da707fa8ac1ab64f75a38">&#9670;&#160;</a></span>can_open_req()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void can_open_req </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Someone wishes to send us an SDP packet; received CAN_OPEN_REQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Describes what is going on </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5fd381e10e3819b52cd732a7b4069ec0" name="a5fd381e10e3819b52cd732a7b4069ec0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fd381e10e3819b52cd732a7b4069ec0">&#9670;&#160;</a></span>can_close_ack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void can_close_ack </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Received CAN_CLOSE_ACK from sender. </p>
<p >Cancel timeout and go to IDLE </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Describes what is going on </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8debf36c9a745df8bc32620829b38b03" name="a8debf36c9a745df8bc32620829b38b03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8debf36c9a745df8bc32620829b38b03">&#9670;&#160;</a></span>can_close_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void can_close_timeout </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receiver timed out waiting for CAN_CLOSE_ACK. </p>
<p >Retry a few times and then give up, returning to IDLE </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">arg1</td><td>Receive descriptor </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg2</td><td>Transaction ID </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa68918266afb1561ede4a6e90087ed6b" name="aa68918266afb1561ede4a6e90087ed6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa68918266afb1561ede4a6e90087ed6b">&#9670;&#160;</a></span>can_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void can_data </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when CAN_DATA packet arrives. </p>
<p >Adds the payload to the SDP packet being reassembled if the message is meant for us and expected. If the packet has been fully received, add it into the main message system with <a class="el" href="bmp_8h.html#a6c15f3010740b94a3e680d266de41cf9" title="Insert a message in the message queue.">msg_queue_insert()</a> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Describes what is going on </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d1</td><td>First payload word </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d2</td><td>Second payload word </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac51a4f690c17e8dfe99fecdec0acd3e4" name="ac51a4f690c17e8dfe99fecdec0acd3e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac51a4f690c17e8dfe99fecdec0acd3e4">&#9670;&#160;</a></span>can_proc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void can_proc </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a command immediately; handles CAN_PROC events. </p>
<p >Must be one of the ops listed in <a class="el" href="bmp__can_8c.html#a1b9becfd629c2c68273a7c0c655cddc8" title="Operations that can be run &quot;immediately&quot; by can_proc()">proc_list</a> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Describes what is going on </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d1</td><td>First payload word </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d2</td><td>Second payload word </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8f5eaac72e01db2e7475fdb129e3850a" name="a8f5eaac72e01db2e7475fdb129e3850a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f5eaac72e01db2e7475fdb129e3850a">&#9670;&#160;</a></span>proc_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proc_setup </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up networking. Handles remote request across CAN from BMP master. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">d1</td><td>Combined hardware version, count of zero IP netmask bits, and frame ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d2</td><td>IP <em>gateway</em> address. (Local addresses derive from this, frame ID and board ID.) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adb5f2a475d9ec5c3fadd1fa1ec6da9d0" name="adb5f2a475d9ec5c3fadd1fa1ec6da9d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb5f2a475d9ec5c3fadd1fa1ec6da9d0">&#9670;&#160;</a></span>can_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void can_exec </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Immediate execute. Arranges for <a class="el" href="bmp__can_8c.html#a8f5eaac72e01db2e7475fdb129e3850a" title="Set up networking. Handles remote request across CAN from BMP master.">proc_setup()</a> to be called. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Describes what is going on </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d1</td><td>First payload word </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d2</td><td>Second payload word </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae041ce291b0475352c3946139fc4345e" name="ae041ce291b0475352c3946139fc4345e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae041ce291b0475352c3946139fc4345e">&#9670;&#160;</a></span>can_proc_cmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can_proc_cmd </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Asks another BMP to run a proc from <a class="el" href="bmp__can_8c.html#a1b9becfd629c2c68273a7c0c655cddc8" title="Operations that can be run &quot;immediately&quot; by can_proc()">proc_list</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dest</td><td>Who to ask </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">op</td><td>Describes what operation to run </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg1</td><td>First payload word </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg2</td><td>Second payload word </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0d7c808adb67dec04560acc3d75ea6d3" name="a0d7c808adb67dec04560acc3d75ea6d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d7c808adb67dec04560acc3d75ea6d3">&#9670;&#160;</a></span>can_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can_timer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is called every 10ms on all boards. </p>
<p >Non-zero boards just use it to timeout the CAN LED. The zero board uses it to ping all other boards and send them "config1" and "config2" </p>

</div>
</div>
<a id="a7d1120d0271e11535def5f56d375e9a9" name="a7d1120d0271e11535def5f56d375e9a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d1120d0271e11535def5f56d375e9a9">&#9670;&#160;</a></span>CAN_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CAN_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handler for receiving a message off the CAN. </p>
<p >CAN request interrupt handler.</p>
<p >Delegates to:</p><ul>
<li><a class="el" href="bmp__can_8c.html#aa68918266afb1561ede4a6e90087ed6b" title="Called when CAN_DATA packet arrives.">can_data()</a></li>
<li><a class="el" href="bmp__can_8c.html#a9a803802a85da707fa8ac1ab64f75a38" title="Someone wishes to send us an SDP packet; received CAN_OPEN_REQ.">can_open_req()</a></li>
<li><a class="el" href="bmp__can_8c.html#a7de0433e1cc0015a4b9c27562a840a6c" title="Received an CAN_OPEN_ACK packet from receiver.">can_open_ack()</a></li>
<li><a class="el" href="bmp__can_8c.html#a39d98ec474dc67c8c12a282ff3444ee5" title="Received CAN_NACK from receiver because it found a packet out of sequence.">can_nack()</a></li>
<li><a class="el" href="bmp__can_8c.html#aa2ef2f6f1473d8e06be2601b25fba31a" title="Received CAN_CLOSE_REQ from receiver.">can_close_req()</a></li>
<li><a class="el" href="bmp__can_8c.html#a5fd381e10e3819b52cd732a7b4069ec0" title="Received CAN_CLOSE_ACK from sender.">can_close_ack()</a></li>
<li><a class="el" href="bmp__can_8c.html#ac51a4f690c17e8dfe99fecdec0acd3e4" title="Add a command immediately; handles CAN_PROC events.">can_proc()</a></li>
<li><a class="el" href="bmp__can_8c.html#adb5f2a475d9ec5c3fadd1fa1ec6da9d0" title="Immediate execute. Arranges for proc_setup() to be called.">can_exec()</a> </li>
</ul>

</div>
</div>
<a id="ac003219724e49da044a9f68876542a3d" name="ac003219724e49da044a9f68876542a3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac003219724e49da044a9f68876542a3d">&#9670;&#160;</a></span>configure_can()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void configure_can </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the CAN controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Our ID </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1b9becfd629c2c68273a7c0c655cddc8" name="a1b9becfd629c2c68273a7c0c655cddc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b9becfd629c2c68273a7c0c655cddc8">&#9670;&#160;</a></span>proc_list</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="bmp_8h.html#a0ab88001d910cc9c3284eff2bd36016f">event_proc</a> proc_list[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    <a class="code hl_function" href="bmp_8h.html#a93e0d3512e414bd77d2ea7c4532203cb">proc_reset</a>,</div>
<div class="line">    <a class="code hl_function" href="bmp_8h.html#a012588657bf41fcda17e8d5bb931b00f">proc_power</a>,</div>
<div class="line">    <a class="code hl_function" href="bmp_8h.html#ad2602bcdf7124554212e2ab9576c8317">proc_led</a>            </div>
<div class="line">}</div>
<div class="ttc" id="abmp_8h_html_a012588657bf41fcda17e8d5bb931b00f"><div class="ttname"><a href="bmp_8h.html#a012588657bf41fcda17e8d5bb931b00f">proc_power</a></div><div class="ttdeci">void proc_power(uint32_t arg1, uint32_t arg2)</div><div class="ttdoc">Control power for this board; calls set_power() (and sf_scan() and reset_spin() if powering on)</div><div class="ttdef"><b>Definition:</b> bmp_cmd.c:444</div></div>
<div class="ttc" id="abmp_8h_html_a93e0d3512e414bd77d2ea7c4532203cb"><div class="ttname"><a href="bmp_8h.html#a93e0d3512e414bd77d2ea7c4532203cb">proc_reset</a></div><div class="ttdeci">void proc_reset(uint32_t arg1, uint32_t arg2)</div><div class="ttdoc">Board reset handler; calls reset_spin()</div><div class="ttdef"><b>Definition:</b> bmp_cmd.c:401</div></div>
<div class="ttc" id="abmp_8h_html_ad2602bcdf7124554212e2ab9576c8317"><div class="ttname"><a href="bmp_8h.html#ad2602bcdf7124554212e2ab9576c8317">proc_led</a></div><div class="ttdeci">void proc_led(uint32_t arg1, uint32_t arg2)</div><div class="ttdoc">Control the LEDs on this board; call led_set()</div><div class="ttdef"><b>Definition:</b> bmp_cmd.c:372</div></div>
</div><!-- fragment -->
<p>Operations that can be run "immediately" by <a class="el" href="bmp__can_8c.html#ac51a4f690c17e8dfe99fecdec0acd3e4" title="Add a command immediately; handles CAN_PROC events.">can_proc()</a> </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Oct 11 2023 06:44:46 for spinnaker_tools (BMP) by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
